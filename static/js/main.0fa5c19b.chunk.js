(this.webpackJsonpsnpandme=this.webpackJsonpsnpandme||[]).push([[0],{110:function(e,t,n){e.exports=function(){return new Worker(n.p+"05a5069ab37953881250.worker.js")}},118:function(e,t,n){"use strict";n.r(t);var r=n(15),i=n.n(r),a=n(19),o=n(0),c=n(10),s=n.n(c),l=n(91),u=n(178),d=n(6),p=n(172),h=n(173),b=n(90),j=n.n(b),f=n(46),m=n(14),x=n(92),v=n(155),O=n(87),g=n.n(O),w=n(86),y=n.n(w),k=n(95),F=n(162),S=n(122),N=n(163),A=n(24),I=n(25),C=n(80),D=new(n.n(C).a),P=function(){function e(t){Object(A.a)(this,e),this.worker=null,this.data=null,this.timerID=null,this.progress=void 0,this.progress=t}return Object(I.a)(e,[{key:"start",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.worker){e.next=2;break}throw Error("foreground worked invoked while processing.");case 2:return this.data={snps:t,type:n},e.next=5,new D.default(this.data.type);case 5:this.worker=e.sent,this.worker.start(this.data.snps),this.startWorker();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.timerID&&window.clearTimeout(this.timerID),this.timerID=null,this.data=null}},{key:"startWorker",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.worker.start(this.data.snps),(t=function(){var e=Object(a.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data||!n.worker){e.next=6;break}return n.timerID=null,e.next=4,n.worker.Next();case 4:r=e.sent,n.data&&n.worker&&(r.length>0?(n.progress(r),n.timerID=window.setTimeout(t,200)):(n.worker=null,console.log("Completly Done...")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=n(50),H=Object(E.b)({name:"PopulationType",initialState:{population:"European"},reducers:{setPopulation:function(e,t){e.population=t.payload}}}),W=H.actions.setPopulation,R=function(e){return e.population.population},z=H.reducer,L=Object(E.b)({name:"Filename",initialState:{filename:""},reducers:{setFilename:function(e,t){e.filename=t.payload}}}),M=L.actions.setFilename,T=function(e){return e.filename.filename},U=L.reducer,q=Object(E.b)({name:"Snps",initialState:{list:[]},reducers:{setSnps:function(e,t){e.list=t.payload}}}),B=q.actions.setSnps,G=function(e){return e.snps},_=q.reducer,Y="#FFFAAA",J="#FFAAAA",Q="#A0A0FF",V="#FFFFFF",K="#AAAAAA",$="Frequency",X=n(72),Z=function(){function e(t,n){var r=this;Object(A.a)(this,e),this.list=void 0,this.list=[],t.split("\n").forEach((function(e){if(e.startsWith("rs")){var t=e.split("\t").map((function(e){return e.trim()}));if(4===t.length){var i=t[1].toUpperCase();(void 0===n||n.findIndex((function(e){return e===i}))>=0)&&t[3].match(/[AGCT]/)&&!Number.isNaN(Number(t[2]))&&r.list.push({id:t[0],chr:i,bases:t[3].toUpperCase()})}}}))}return Object(I.a)(e,[{key:"snpList",get:function(){return this.list}},{key:"snpChromosome",value:function(e){return e=e.trim().toUpperCase(),this.list.filter((function(t){return t.chr===e}))}}],[{key:"fromFile",value:function(){var t=Object(a.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!X.existsSync(n)){t.next=4;break}return t.abrupt("return",new Promise((function(t,r){X.readFile(n,{},(function(n,i){n&&r(n);var a=new e(i.toString());t(a)}))})));case 4:throw new Error("file ".concat(n," noy found!"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),ee={ID:function(e,t){var n=parseInt(e.snp.id.substr(2)),r=parseInt(t.snp.id.substr(2));return n-r},Chromosome:function(e,t){return ne(e,t,"chr")},Base:function(e,t){return ne(e,t,"bases")},Frequency:function(e,t){var n,r,i=null!==(n=e.perc)&&void 0!==n?n:2,a=null!==(r=t.perc)&&void 0!==r?r:2;return i-a},Publications:function(e,t){return e.pub-t.pub}},te=function(){function e(t){Object(A.a)(this,e),this.worker=null,this.update=void 0,this.list=[],this.sortId=$,this.sortDir="asc",this.update=t}return Object(I.a)(e,[{key:"start",value:function(e,t){var n=this;this.worker&&this.worker.stop();var r=new Z(e,["Y","MT"]);this.list=r.snpList.map((function(e){return n.toSnpEl(e)})),this.doSort(),this.worker=new P((function(e){n.merge(e),"Frequency"!==n.sortId&&"Publications"!==n.sortId||n.doSort(),n.sendUpdate()})),this.worker.start(r.snpList,t)}},{key:"sort",value:function(e,t){this.sortId=e,this.sortDir=t,this.doSort(),this.sendUpdate()}},{key:"doSort",value:function(){var e=this,t="asc"===this.sortDir?1:-1;this.list=this.list.sort((function(n,r){return t*ee[e.sortId](n.val,r.val)}))}},{key:"sendUpdate",value:function(){var e=this.list.map((function(e){return{done:e.done,val:Object(f.a)({},e.val)}}));this.update(e)}},{key:"merge",value:function(e){this.list.forEach((function(t){if(!t.done){var n=e.find((function(e){return t.val.snp.id===e.snp.id}));n&&(t.done=!0,t.val.perc=n.perc,t.val.pub=n.pub)}}))}},{key:"toSnpEl",value:function(e){return{val:{snp:e,perc:null,pub:0},done:!1}}}]),e}();function ne(e,t,n){return e.snp[n]>t.snp[n]?1:-1}var re=n(16),ie=n(157),ae=n(159),oe=n(160),ce=n(179),se=n(2),le=Object(v.a)((function(e){return{table:{width:"100%"},container:{},header:{background:"#FAFAFA",fontWeight:"bold"}}})),ue=[{id:"ID",align:"left",text:"SNP id"},{id:"Chromosome",align:"right",text:"Chromosome"},{id:"Base",align:"right",text:"Base"},{id:"Frequency",align:"right",text:"Frequency"},{id:"Publications",align:"right",text:"Publications"}];function de(e){var t=e.sort,n=le(),r=Object(o.useState)($),i=Object(m.a)(r,2),a=i[0],c=i[1],s=Object(o.useState)("asc"),l=Object(m.a)(s,2),u=l[0],d=l[1];return Object(se.jsx)(ie.a,{children:Object(se.jsx)(ae.a,{children:ue.map((function(e){return Object(se.jsx)(oe.a,{align:e.align,className:n.header,children:Object(se.jsx)(ce.a,{active:a===e.id,direction:u,onClick:function(){return function(e){var n="asc";a===e&&(n="asc"===u?"desc":"asc"),c(e),d(n),t(e,n)}(e.id)},children:e.text})},e.id)}))})})}var pe=n(161),he=Object(v.a)((function(e){return{undefined:{background:K},novalue:{background:V},high:{background:Q},mid:{background:Y},low:{background:J}}}));function be(e){var t=e.list,n=he(),r=function(e){var t=n.undefined;return e.done&&(null!==e.val.perc?(t=n.high,e.val.perc<.5&&(t=n.mid),e.val.perc<.25&&(t=n.low)):t=n.novalue),t};return Object(se.jsx)(pe.a,{children:t.map((function(e){return Object(se.jsxs)(ae.a,{className:r(e),children:[Object(se.jsx)(oe.a,{component:"th",scope:"row",children:Object(se.jsx)("a",{target:"_blank",href:"https://www.ncbi.nlm.nih.gov/snp/".concat(e.val.snp.id),rel:"noreferrer",children:e.val.snp.id})}),Object(se.jsx)(oe.a,{align:"right",children:e.val.snp.chr}),Object(se.jsx)(oe.a,{align:"right",children:e.val.snp.bases}),Object(se.jsx)(oe.a,{align:"right",children:null!==e.val.perc?e.val.perc.toFixed(2):"-"}),Object(se.jsxs)(oe.a,{align:"right",children:[e.val.pub," "]})]},e.val.snp.id)}))})}var je=n(45),fe=Object(v.a)((function(e){return{table:{width:"100%"},container:{}}})),me={maxHeight:"calc(100% - 2em)"};function xe(e){var t=e.data,n=fe(),r=Object(o.useRef)(null),i=Object(re.b)(),a=Object(re.c)(G),c=Object(re.c)(R),s=Object(je.b)();Object(o.useEffect)((function(){r.current||(r.current=new te((function(e){i(B(e))}))),r.current.start(t,c)}),[t,i,c]);return Object(se.jsx)(F.a,{component:S.a,className:n.container,style:me,children:Object(se.jsxs)(N.a,{className:n.table,size:"small",stickyHeader:!0,"aria-label":"simple table",children:[Object(se.jsx)(de,{sort:function(e,t){r.current&&r.current.sort(e,t),s&&s.event("Data Sort",e,"")}}),Object(se.jsx)(be,{list:a.list})]})})}var ve=Object(v.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}}));function Oe(){var e=ve(),t=Object(o.useState)(null),n=Object(m.a)(t,2),r=n[0],c=n[1],s=Object(o.useState)(null),l=Object(m.a)(s,2),u=l[0],d=l[1],p=Object(re.b)(),h=Object(je.b)();Object(o.useEffect)((function(){h&&h.pageview("main")}),[]);var b=Object(o.useCallback)(function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.filter((function(e){return e.path&&(e.path.toLowerCase().endsWith(".txt")||e.path.toLowerCase().indexOf(".23andme.")>0)}))).length>0)){e.next=9;break}return r=n[0],e.next=5,ge(r);case 5:ye(a=e.sent)?(c(a),p(M(r.name)),h&&h.event("Valid File Load","valid file","")):(c(null),d("".concat(r.name," is not valid")),h&&h.event("Invalid File Content","invalid file content","")),e.next=12;break;case 9:c(null),d("unable to load ".concat(t[0].name)),h&&h.event("Invalid File Type","invalid file type","");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,p]),j=Object(x.a)({onDrop:b}),v=j.getRootProps,O=j.getInputProps,w=j.isDragActive;return Object(se.jsx)("div",{className:e.root,children:Object(se.jsxs)("div",Object(f.a)(Object(f.a)({},v()),{},{className:e.root,children:[Object(se.jsxs)("div",{className:w?e.drop:e.noDisplay,children:[Object(se.jsx)(y.a,{className:"AddIcn"}),Object(se.jsx)(k.a,{className:"text",children:"Drop the file here."})]}),null!==r?Object(se.jsx)(se.Fragment,{children:Object(se.jsx)(xe,{data:r})}):Object(se.jsxs)("div",{className:w?e.noDisplay:e.drop,children:[Object(se.jsx)("input",Object(f.a)({},O())),Object(se.jsx)(g.a,{className:"AddIcn"}),null!==u?Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)(k.a,{className:"text",children:["\ud83d\udd90 ",u]})}):Object(se.jsx)(se.Fragment,{}),Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(k.a,{className:"text",children:"Drag and Drop here your 23andme txt file."}),Object(se.jsx)(k.a,{className:"text",children:"or click here to select the file."})]})]})]}))})}function ge(e){return we.apply(this,arguments)}function we(){return(we=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return e.indexOf("This data file generated by 23andMe")>0&&e.indexOf("# rsid\tchromosome\tposition\tgenotype")>0}var ke=n(165),Fe=n(166),Se=n(175),Ne=n(164),Ae=n(88),Ie=n.n(Ae),Ce=Object(v.a)((function(e){return Object(u.a)({cirProgress:{marginRight:e.spacing(2),color:"#0000FF"},txtProgress:{marginRight:e.spacing(2),color:"#0000FF"},cirHidden:{marginRight:e.spacing(2),color:"transparent"},textHidden:{display:"none"},iconDisplay:{color:"white"},iconHidden:{display:"none"}})}));function De(){var e=Ce(),t=Object(re.c)(G),n=0,r=0;t.list.forEach((function(e){return e.done?r++:n++}));var i=r+n,a=i>0&&n>0,o=a?r/i*100:0,c=o>0?"determinate":"indeterminate",s=o>0?"".concat(Math.round(o),"%"):"";return Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)(Se.a,{position:"relative",display:"inline-flex",children:[Object(se.jsx)(Ne.a,{className:a?e.cirProgress:e.cirHidden,variant:c,value:o}),Object(se.jsxs)(Se.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:[Object(se.jsx)(Ie.a,{className:a?e.iconHidden:i>0?e.iconDisplay:e.iconHidden,fontSize:"large"}),Object(se.jsx)(k.a,{variant:"caption",component:"div",className:a?e.txtProgress:e.textHidden,children:s})]})]})})}var Pe=Object(v.a)((function(e){return Object(u.a)({margin:{marginRight:e.spacing(2)},boxHidden:{display:"none"},boxDisplay:{display:"inline-flex"}})}));function Ee(){var e=Pe(),t=Object(re.c)(G),n=0,r=0,i=0,a=0,o=0;t.list.forEach((function(e){return e.done?null!==e.val.perc?e.val.perc<.25?i++:e.val.perc<.5?r++:n++:a++:o++}));var c=[i,r,n,a,o],s=c.reduce((function(e,t){return e+t}),0),l=function(e){var t=[],n=e.reduce((function(e,t){return e+t}),0);if(n>0){var r=e.map((function(e){return Math.floor(100*e/n)})),i=100-r.reduce((function(e,t){return e+t}),0);r[r.length-2]+=i,t=r.map((function(e){return"".concat(e,"%")}))}return t}(c),u=[J,Y,Q,V,K];return Object(se.jsxs)(Se.a,{position:"relative",className:s>0?e.boxDisplay:e.boxHidden,children:[Object(se.jsxs)(k.a,{align:"center",variant:"caption",color:"secondary",className:e.margin,noWrap:!0,children:[" ","".concat(s," Snps, ").concat(i," low frequency")]}),Object(se.jsx)(Se.a,{top:20,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",className:e.margin,children:l.map((function(e,t){return Object(se.jsx)("div",{style:{background:u[t],position:"relative",width:e,height:"5px"}},t)}))})]})}var He=n(174),We=n(180),Re=Object(v.a)((function(e){return Object(u.a)({combobox:{marginRight:e.spacing(2),background:"transparent"},textColor:{color:"white",borderWidth:"1px",borderColor:"white !important"},icon:{fill:"white"}})}));function ze(){var e=Re(),t=Object(re.c)(R),n=Object(re.b)(),r=["European","African","East Asian","South Asian"],i=["European","African","SAsian","EAsian"],a=r[i.indexOf(t)];return Object(se.jsx)(He.a,{className:e.combobox,variant:"outlined",size:"small",select:!0,value:a,onChange:function(e){var t,a=i[r.indexOf(null!==(t=e.target.value)&&void 0!==t?t:"European")];n(W(a))},InputProps:{classes:{root:e.textColor,notchedOutline:e.textColor}},SelectProps:{classes:{icon:e.icon}},children:r.map((function(e){return Object(se.jsx)(We.a,{value:e,children:e},e)}))})}var Le=Object(v.a)((function(e){return Object(u.a)({root:{flexGrow:1},toolbar:{display:"flex",justifyContent:"space-between"},toolList:{display:"flex",alignItems:"center"}})}));function Me(){var e=Le(),t=Object(re.c)(T);return Object(se.jsx)("div",{className:e.root,children:Object(se.jsx)(ke.a,{position:"static",children:Object(se.jsxs)(Fe.a,{variant:"dense",className:e.toolbar,children:[Object(se.jsxs)(k.a,{variant:"h6",color:"inherit",noWrap:!0,children:["SNPs and Me ",t.length>0?"[".concat(t,"]"):""]}),Object(se.jsxs)("div",{className:e.toolList,children:[Object(se.jsx)(ze,{}),Object(se.jsx)(Ee,{}),Object(se.jsx)(De,{})]})]})})})}var Te=n(64),Ue=Object(v.a)((function(e){return{version:{position:"absolute",left:"14px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main},ribbon:{position:"absolute",right:"0px",top:"0px"}}})),qe=function(e){var t=e.label,n=e.baseURL,r=e.forkme,i=Ue();return Object(se.jsxs)(se.Fragment,{children:[r&&n&&Object(se.jsx)("div",{className:i.ribbon,children:Object(se.jsx)("a",{href:n,children:Object(se.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(se.jsx)("div",{className:i.version,onClick:function(){n&&""!==Te.long&&(window.location.href=n+"/tree/"+Te.long)},children:Object(se.jsx)("p",{children:t+Te.version})})]})},Be=n(171),Ge=n(177),_e=n(170),Ye=n(168),Je=n(169),Qe=n(167),Ve=n(89),Ke="SnpsAndMeHelpReadStatus",$e="Read",Xe=function(){var e=Object(o.useState)(!function(){var e=!1;try{var t=localStorage.getItem(Ke);t&&(e=t===$e)}catch(n){}return e}()),t=Object(m.a)(e,2),n=t[0],r=t[1],i=function(){r(!1)};return Object(se.jsxs)(Ge.a,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"lg",children:[Object(se.jsx)(Qe.a,{id:"alert-dialog-title",children:"SNPs and Me"}),Object(se.jsxs)(Ye.a,{children:[Object(se.jsxs)(Je.a,{id:"alert-dialog-description",children:["Drag and drop your 23andme file and the browser will color code the part of the genome (called ",Object(se.jsx)("a",{href:"https://en.wikipedia.org/wiki/Single-nucleotide_polymorphism",children:"SNP"}),") based on their frequency. You will be able to find the part which are ",Object(se.jsx)("i",{children:"rare among the population"})," and so the ones which make you ",Object(se.jsx)("i",{children:"unique"})," !",Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),"Click on the SNP ID to find out information about it from the ",Object(se.jsx)("a",{href:"https://www.ncbi.nlm.nih.gov/",children:"National Center for Biochnology Information"}),"."]}),!Ve.isMobile&&Object(se.jsx)(Je.a,{id:"alert-dialog-description",align:"center",children:Object(se.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/lUS8Q2-EbyY",title:"Snp and me",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Object(se.jsxs)(Je.a,{id:"alert-dialog-description",children:[Object(se.jsx)("b",{children:"\ud83d\udd90 Privacy Statement:"})," this application ",Object(se.jsx)("u",{children:Object(se.jsx)("i",{children:"does not"})})," store nor transmit your genomic information. All the analysis is done locally in your browser."]})]}),Object(se.jsxs)(_e.a,{children:[Object(se.jsx)(Be.a,{onClick:i,color:"primary",children:"close"}),Object(se.jsx)(Be.a,{onClick:function(){i(),function(){try{localStorage.setItem(Ke,$e)}catch(e){}}()},color:"primary",autoFocus:!0,children:"dismiss forever"})]})]})};var Ze=Object(l.a)({palette:{primary:j.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),et=Object(d.a)((function(e){return Object(u.a)({app:{textAlign:"center"},main:{position:"absolute",top:"55px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(se.jsxs)(p.a,{theme:Ze,children:[Object(se.jsx)(h.a,{}),Object(se.jsxs)("div",{className:t.app,children:[Object(se.jsx)(Me,{}),Object(se.jsx)("div",{className:t.main,children:Object(se.jsx)(Oe,{})}),Object(se.jsx)(qe,{label:"version : ",forkme:!1,baseURL:"https://github.com/VittorioAccomazzi/snpsandme"}),Object(se.jsx)(Xe,{})]})]})})),tt=Object(E.a)({reducer:{population:z,snps:_,filename:U}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=new je.a("G-QK0MGYD60T",void 0,void 0,3e4);(function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.initialize();case 2:s.a.render(Object(se.jsx)(re.a,{store:tt,children:Object(se.jsx)(et,{})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e){e.exports=JSON.parse('{"version":"43ad6bd\\n","long":"43ad6bd7ded4ee0e58ea001abab76e113e93dda6\\n"}')},80:function(e,t,n){var r,i=n(119).wrap,a=n(110);e.exports=function e(){return this instanceof e?i(a()):r||(r=i(a()))}}},[[118,1,2]]]);
//# sourceMappingURL=main.0fa5c19b.chunk.js.map