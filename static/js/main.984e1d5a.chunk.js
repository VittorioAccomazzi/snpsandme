(this.webpackJsonpsnpandme=this.webpackJsonpsnpandme||[]).push([[0],{100:function(e,t,n){e.exports=function(){return new Worker(n.p+"05a5069ab37953881250.worker.js")}},107:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),i=n.n(a),c=n(82),o=n(156),s=n(6),l=n(151),u=n(152),d=n(81),p=n.n(d),h=n(41),b=n(14),f=n.n(b),j=n(22),m=n(16),x=n(83),v=n(138),O=n(79),g=n.n(O),w=n(78),y=n.n(w),k=n(147),F=n(145),N=n(112),A=n(146),I=n(38),S=n(39),C=n(72),D=new(n.n(C).a),P=function(){function e(t){Object(I.a)(this,e),this.worker=null,this.data=null,this.timerID=null,this.progress=void 0,this.progress=t}return Object(S.a)(e,[{key:"start",value:function(){var e=Object(j.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.worker){e.next=2;break}throw Error("foreground worked invoked while processing.");case 2:return this.data={snps:t,type:n},e.next=5,new D.default(this.data.type);case 5:this.worker=e.sent,this.worker.start(this.data.snps),this.startWorker();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.timerID&&window.clearTimeout(this.timerID),this.timerID=null,this.data=null}},{key:"startWorker",value:function(){var e=Object(j.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.worker.start(this.data.snps),(t=function(){var e=Object(j.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data||!n.worker){e.next=6;break}return n.timerID=null,e.next=4,n.worker.Next();case 4:r=e.sent,n.data&&n.worker&&(r.length>0?(n.progress(r),n.timerID=window.setTimeout(t,200)):(n.worker=null,console.log("Completly Done...")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=n(65),H=function(){function e(t,n){var r=this;Object(I.a)(this,e),this.list=void 0,this.list=[],t.split("\n").forEach((function(e){if(e.startsWith("rs")){var t=e.split("\t").map((function(e){return e.trim()}));if(4===t.length){var a=t[1].toUpperCase();(void 0===n||n.findIndex((function(e){return e===a}))>=0)&&t[3].match(/[AGCT]/)&&!Number.isNaN(Number(t[2]))&&r.list.push({id:t[0],chr:a,bases:t[3].toUpperCase()})}}}))}return Object(S.a)(e,[{key:"snpList",get:function(){return this.list}},{key:"snpChromosome",value:function(e){return e=e.trim().toUpperCase(),this.list.filter((function(t){return t.chr===e}))}}],[{key:"fromFile",value:function(){var t=Object(j.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!E.existsSync(n)){t.next=4;break}return t.abrupt("return",new Promise((function(t,r){E.readFile(n,{},(function(n,a){n&&r(n);var i=new e(a.toString());t(i)}))})));case 4:throw new Error("file ".concat(n," noy found!"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),W={ID:function(e,t,n){var r=parseInt(e.snp.id.substr(2)),a=parseInt(t.snp.id.substr(2));return"asc"===n?r-a:a-r},Chromosome:function(e,t,n){return z(e,t,n,"chr")},Base:function(e,t,n){return z(e,t,n,"bases")},Frequency:function(e,t,n){return L(e,t,n,"perc")},Publications:function(e,t,n){return L(e,t,n,"pub")}},R=function(){function e(t){Object(I.a)(this,e),this.worker=null,this.update=void 0,this.list=[],this.sortId="ID",this.sortDir="asc",this.update=t}return Object(S.a)(e,[{key:"start",value:function(e,t){var n=this;this.worker&&this.worker.stop();var r=new H(e,["Y","MT"]);this.list=r.snpList.map((function(e){return n.toSnpEl(e)})),this.doSort(),this.worker=new P((function(e){n.merge(e),"Frequency"!==n.sortId&&"Publications"!==n.sortId||n.doSort(),n.sendUpdate()})),this.worker.start(r.snpList,t)}},{key:"sort",value:function(e,t){this.sortId=e,this.sortDir=t,this.doSort(),this.sendUpdate()}},{key:"doSort",value:function(){var e=this;this.list=this.list.sort((function(t,n){return W[e.sortId](t.val,n.val,e.sortDir)}))}},{key:"sendUpdate",value:function(){var e=this.list.map((function(e){return{done:e.done,val:Object(h.a)({},e.val)}}));this.update(e)}},{key:"merge",value:function(e){this.list.forEach((function(t){if(!t.done){var n=e.find((function(e){return t.val.snp.id===e.snp.id}));n&&(t.done=!0,t.val.perc=n.perc,t.val.pub=n.pub)}}))}},{key:"toSnpEl",value:function(e){return{val:{snp:e,perc:null,pub:0},done:!1}}}]),e}();function z(e,t,n,r){return("asc"===n?1:-1)*(e.snp[r]>t.snp[r]?1:-1)}function L(e,t,n,r){var a,i;return("asc"===n?1:-1)*((null!==(a=e[r])&&void 0!==a?a:0)>(null!==(i=t[r])&&void 0!==i?i:0)?1:-1)}var U=n(46),T=Object(U.b)({name:"PopulationType",initialState:{population:"European"},reducers:{setPopulation:function(e,t){e.population=t.payload}}}),q=T.actions.setPopulation,B=function(e){return e.population.population},M=T.reducer,_=Object(U.b)({name:"Filename",initialState:{filename:""},reducers:{setFilename:function(e,t){e.filename=t.payload}}}),G=_.actions.setFilename,J=function(e){return e.filename.filename},V=_.reducer,Y=Object(U.b)({name:"Snps",initialState:{list:[]},reducers:{setSnps:function(e,t){e.list=t.payload}}}),$=Y.actions.setSnps,K=function(e){return e.snps},Q=Y.reducer,X="#FFFAAA",Z="#FFAAAA",ee="#A0A0FF",te="#FFFFFF",ne="#AAAAAA",re=n(12),ae=n(140),ie=n(142),ce=n(143),oe=n(157),se=n(3),le=Object(v.a)((function(e){return{table:{width:"100%"},container:{},header:{background:"#FAFAFA",fontWeight:"bold"}}})),ue=[{id:"ID",align:"left",text:"SNP id"},{id:"Chromosome",align:"right",text:"Chromosome"},{id:"Base",align:"right",text:"Base"},{id:"Frequency",align:"right",text:"Frequency"},{id:"Publications",align:"right",text:"Publications"}];function de(e){var t=e.sort,n=le(),a=Object(r.useState)("ID"),i=Object(m.a)(a,2),c=i[0],o=i[1],s=Object(r.useState)("asc"),l=Object(m.a)(s,2),u=l[0],d=l[1];return Object(se.jsx)(ae.a,{children:Object(se.jsx)(ie.a,{children:ue.map((function(e){return Object(se.jsx)(ce.a,{align:e.align,className:n.header,children:Object(se.jsx)(oe.a,{active:c===e.id,direction:u,onClick:function(){return function(e){var n="asc";c===e&&(n="asc"===u?"desc":"asc"),o(e),d(n),t(e,n)}(e.id)},children:e.text})},e.id)}))})})}var pe=n(144),he=Object(v.a)((function(e){return{undefined:{background:ne},novalue:{background:te},high:{background:ee},mid:{background:X},low:{background:Z}}}));function be(e){var t=e.list,n=he(),r=function(e){var t=n.undefined;return e.done&&(e.val.perc?(t=n.high,e.val.perc<.5&&(t=n.mid),e.val.perc<.25&&(t=n.low)):t=n.novalue),t};return Object(se.jsx)(pe.a,{children:t.map((function(e){return Object(se.jsxs)(ie.a,{className:r(e),children:[Object(se.jsx)(ce.a,{component:"th",scope:"row",children:Object(se.jsx)("a",{target:"_blank",href:"https://www.ncbi.nlm.nih.gov/snp/".concat(e.val.snp.id),rel:"noreferrer",children:e.val.snp.id})}),Object(se.jsx)(ce.a,{align:"right",children:e.val.snp.chr}),Object(se.jsx)(ce.a,{align:"right",children:e.val.snp.bases}),Object(se.jsx)(ce.a,{align:"right",children:e.val.perc?e.val.perc.toFixed(2):"-"}),Object(se.jsxs)(ce.a,{align:"right",children:[e.val.pub>0?e.val.pub:e.val.perc?"0":"-"," "]})]},e.val.snp.id)}))})}var fe=Object(v.a)((function(e){return{table:{width:"100%"},container:{}}})),je={maxHeight:"calc(100% - 2em)"};function me(e){var t=e.data,n=fe(),a=Object(r.useRef)(null),i=Object(re.b)(),c=Object(re.c)(K),o=Object(re.c)(B);Object(r.useEffect)((function(){a.current||(a.current=new R((function(e){i($(e))}))),a.current.start(t,o)}),[t,i,o]);return Object(se.jsx)(F.a,{component:N.a,className:n.container,style:je,children:Object(se.jsxs)(A.a,{className:n.table,size:"small",stickyHeader:!0,"aria-label":"simple table",children:[Object(se.jsx)(de,{sort:function(e,t){a.current&&a.current.sort(e,t)}}),Object(se.jsx)(be,{list:c.list})]})})}var xe=Object(v.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}}));function ve(){var e=xe(),t=Object(r.useState)(null),n=Object(m.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(null),o=Object(m.a)(c,2),s=o[0],l=o[1],u=Object(re.b)(),d=Object(r.useCallback)(function(){var e=Object(j.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.filter((function(e){return e.path&&(e.path.toLowerCase().endsWith(".txt")||e.path.toLowerCase().indexOf(".23andme.")>0)}))).length>0)){e.next=9;break}return r=n[0],e.next=5,Oe(r);case 5:we(a=e.sent)?(i(a),u(G(r.name))):(i(null),l("".concat(r.name," is not valid"))),e.next=11;break;case 9:i(null),l("unable to load ".concat(t[0].name));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,u]),p=Object(x.a)({onDrop:d}),b=p.getRootProps,v=p.getInputProps,O=p.isDragActive;return Object(se.jsx)("div",{className:e.root,children:Object(se.jsxs)("div",Object(h.a)(Object(h.a)({},b()),{},{className:e.root,children:[Object(se.jsxs)("div",{className:O?e.drop:e.noDisplay,children:[Object(se.jsx)(y.a,{className:"AddIcn"}),Object(se.jsx)(k.a,{className:"text",children:"Drop the file here."})]}),null!==a?Object(se.jsx)(se.Fragment,{children:Object(se.jsx)(me,{data:a})}):Object(se.jsxs)("div",{className:O?e.noDisplay:e.drop,children:[Object(se.jsx)("input",Object(h.a)({},v())),Object(se.jsx)(g.a,{className:"AddIcn"}),null!==s?Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)(k.a,{className:"text",children:["\ud83d\udd90 ",s]})}):Object(se.jsx)(se.Fragment,{}),Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(k.a,{className:"text",children:"Drag and Drop here your 23andme txt file."}),Object(se.jsx)(k.a,{className:"text",children:"or click here to select the file."})]})]})]}))})}function Oe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return e.indexOf("This data file generated by 23andMe")>0&&e.indexOf("# rsid\tchromosome\tposition\tgenotype")>0}var ye=n(149),ke=n(150),Fe=n(154),Ne=n(148),Ae=n(80),Ie=n.n(Ae),Se=Object(v.a)((function(e){return Object(o.a)({cirProgress:{marginRight:e.spacing(2),color:"#0000FF"},txtProgress:{marginRight:e.spacing(2),color:"#0000FF"},cirHidden:{marginRight:e.spacing(2),color:"transparent"},textHidden:{display:"none"},iconDisplay:{color:"white"},iconHidden:{display:"none"}})}));function Ce(){var e=Se(),t=Object(re.c)(K),n=0,r=0;t.list.forEach((function(e){return e.done?r++:n++}));var a=r+n,i=a>0&&n>0,c=i?r/a*100:0,o=c>0?"determinate":"indeterminate",s=c>0?"".concat(Math.round(c),"%"):"";return Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)(Fe.a,{position:"relative",display:"inline-flex",children:[Object(se.jsx)(Ne.a,{className:i?e.cirProgress:e.cirHidden,variant:o,value:c}),Object(se.jsxs)(Fe.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:[Object(se.jsx)(Ie.a,{className:i?e.iconHidden:a>0?e.iconDisplay:e.iconHidden,fontSize:"large"}),Object(se.jsx)(k.a,{variant:"caption",component:"div",className:i?e.txtProgress:e.textHidden,children:s})]})]})})}var De=Object(v.a)((function(e){return Object(o.a)({margin:{marginRight:e.spacing(2)},boxHidden:{display:"none"},boxDisplay:{display:"inline-flex"}})}));function Pe(){var e=De(),t=Object(re.c)(K),n=0,r=0,a=0,i=0,c=0;t.list.forEach((function(e){return e.done?e.val.perc?e.val.perc<.25?a++:e.val.perc<.5?r++:n++:i++:c++}));var o=[n,r,a,i,c],s=o.reduce((function(e,t){return e+t}),0),l=function(e){var t=[],n=e.reduce((function(e,t){return e+t}),0);if(n>0){var r=e.map((function(e){return Math.floor(100*e/n)})),a=100-r.reduce((function(e,t){return e+t}),0);r[0]+=a,t=r.map((function(e){return"".concat(e,"%")}))}return t}(o),u=[ee,X,Z,te,ne];return Object(se.jsxs)(Fe.a,{position:"relative",className:s>0?e.boxDisplay:e.boxHidden,children:[Object(se.jsxs)(k.a,{align:"center",variant:"caption",color:"secondary",className:e.margin,children:[" ","".concat(s," Snps, ").concat(a," low frequency")]}),Object(se.jsx)(Fe.a,{top:20,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",className:e.margin,children:l.map((function(e,t){return Object(se.jsx)("div",{style:{background:u[t],position:"relative",width:e,height:"5px"}})}))})]})}var Ee=n(153),He=n(158),We=Object(v.a)((function(e){return Object(o.a)({combobox:{marginRight:e.spacing(2),background:"transparent"},textColor:{color:"white",borderWidth:"1px",borderColor:"white !important"},icon:{fill:"white"}})}));function Re(){var e=We(),t=Object(re.c)(B),n=Object(re.b)(),r=["European","African","East Asian","South Asian"],a=["European","African","SAsian","EAsian"],i=r[a.indexOf(t)];return Object(se.jsx)(Ee.a,{className:e.combobox,variant:"outlined",size:"small",select:!0,value:i,onChange:function(e){var t,i=a[r.indexOf(null!==(t=e.target.value)&&void 0!==t?t:"European")];n(q(i))},InputProps:{classes:{root:e.textColor,notchedOutline:e.textColor}},SelectProps:{classes:{icon:e.icon}},children:r.map((function(e){return Object(se.jsx)(He.a,{value:e,children:e},e)}))})}var ze=Object(v.a)((function(e){return Object(o.a)({root:{flexGrow:1},toolbar:{display:"flex",justifyContent:"space-between"},toolList:{display:"flex",alignItems:"center"}})}));function Le(){var e=ze(),t=Object(re.c)(J);return Object(se.jsx)("div",{className:e.root,children:Object(se.jsx)(ye.a,{position:"static",children:Object(se.jsxs)(ke.a,{variant:"dense",className:e.toolbar,children:[Object(se.jsxs)(k.a,{variant:"h6",color:"inherit",noWrap:!0,children:["SNPs and Me ",t.length>0?"[".concat(t,"]"):""]}),Object(se.jsxs)("div",{className:e.toolList,children:[Object(se.jsx)(Re,{}),Object(se.jsx)(Pe,{}),Object(se.jsx)(Ce,{})]})]})})})}var Ue=n(58),Te=Object(v.a)((function(e){return{version:{position:"absolute",left:"14px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main},ribbon:{position:"absolute",right:"0px",top:"0px"}}})),qe=function(e){var t=e.label,n=e.baseURL,r=e.forkme,a=Te();return Object(se.jsxs)(se.Fragment,{children:[r&&n&&Object(se.jsx)("div",{className:a.ribbon,children:Object(se.jsx)("a",{href:n,children:Object(se.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(se.jsx)("div",{className:a.version,onClick:function(){n&&""!==Ue.long&&(window.location.href=n+"/tree/"+Ue.long)},children:Object(se.jsx)("p",{children:t+Ue.version})})]})},Be=Object(c.a)({palette:{primary:p.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),Me=Object(s.a)((function(e){return Object(o.a)({app:{textAlign:"center"},main:{position:"absolute",top:"55px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(se.jsxs)(l.a,{theme:Be,children:[Object(se.jsx)(u.a,{}),Object(se.jsxs)("div",{className:t.app,children:[Object(se.jsx)(Le,{}),Object(se.jsx)("div",{className:t.main,children:Object(se.jsx)(ve,{})}),Object(se.jsx)(qe,{label:"version : ",forkme:!1,baseURL:"https://github.com/VittorioAccomazzi/snpsandme"})]})]})})),_e=Object(U.a)({reducer:{population:M,snps:Q,filename:V}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(se.jsx)(re.a,{store:_e,children:Object(se.jsx)(Me,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e){e.exports=JSON.parse('{"version":"52944e3\\n","long":"52944e310287f77aa798beec79d0e22617001fbf\\n"}')},72:function(e,t,n){var r,a=n(108).wrap,i=n(100);e.exports=function e(){return this instanceof e?a(i()):r||(r=a(i()))}}},[[107,1,2]]]);
//# sourceMappingURL=main.984e1d5a.chunk.js.map