(this.webpackJsonpsnpandme=this.webpackJsonpsnpandme||[]).push([[0],{101:function(e,t,n){e.exports=function(){return new Worker(n.p+"05a5069ab37953881250.worker.js")}},108:function(e,t,n){"use strict";n.r(t);var r=n(12),a=n.n(r),i=n(18),c=n(0),o=n(9),s=n.n(o),l=n(83),u=n(157),d=n(6),p=n(152),h=n(153),b=n(82),f=n.n(b),j=n(43),m=n(14),v=n(84),x=n(139),O=n(80),g=n.n(O),w=n(79),y=n.n(w),k=n(148),F=n(146),N=n(113),A=n(147),S=n(24),I=n(25),C=n(73),D=new(n.n(C).a),P=function(){function e(t){Object(S.a)(this,e),this.worker=null,this.data=null,this.timerID=null,this.progress=void 0,this.progress=t}return Object(I.a)(e,[{key:"start",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.worker){e.next=2;break}throw Error("foreground worked invoked while processing.");case 2:return this.data={snps:t,type:n},e.next=5,new D.default(this.data.type);case 5:this.worker=e.sent,this.worker.start(this.data.snps),this.startWorker();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.timerID&&window.clearTimeout(this.timerID),this.timerID=null,this.data=null}},{key:"startWorker",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.worker.start(this.data.snps),(t=function(){var e=Object(i.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data||!n.worker){e.next=6;break}return n.timerID=null,e.next=4,n.worker.Next();case 4:r=e.sent,n.data&&n.worker&&(r.length>0?(n.progress(r),n.timerID=window.setTimeout(t,200)):(n.worker=null,console.log("Completly Done...")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=n(47),H=Object(E.b)({name:"PopulationType",initialState:{population:"European"},reducers:{setPopulation:function(e,t){e.population=t.payload}}}),W=H.actions.setPopulation,z=function(e){return e.population.population},L=H.reducer,R=Object(E.b)({name:"Filename",initialState:{filename:""},reducers:{setFilename:function(e,t){e.filename=t.payload}}}),T=R.actions.setFilename,U=function(e){return e.filename.filename},q=R.reducer,M=Object(E.b)({name:"Snps",initialState:{list:[]},reducers:{setSnps:function(e,t){e.list=t.payload}}}),B=M.actions.setSnps,G=function(e){return e.snps},_=M.reducer,J="#FFFAAA",V="#FFAAAA",Y="#A0A0FF",K="#FFFFFF",Q="#AAAAAA",$="Frequency",X=n(67),Z=function(){function e(t,n){var r=this;Object(S.a)(this,e),this.list=void 0,this.list=[],t.split("\n").forEach((function(e){if(e.startsWith("rs")){var t=e.split("\t").map((function(e){return e.trim()}));if(4===t.length){var a=t[1].toUpperCase();(void 0===n||n.findIndex((function(e){return e===a}))>=0)&&t[3].match(/[AGCT]/)&&!Number.isNaN(Number(t[2]))&&r.list.push({id:t[0],chr:a,bases:t[3].toUpperCase()})}}}))}return Object(I.a)(e,[{key:"snpList",get:function(){return this.list}},{key:"snpChromosome",value:function(e){return e=e.trim().toUpperCase(),this.list.filter((function(t){return t.chr===e}))}}],[{key:"fromFile",value:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!X.existsSync(n)){t.next=4;break}return t.abrupt("return",new Promise((function(t,r){X.readFile(n,{},(function(n,a){n&&r(n);var i=new e(a.toString());t(i)}))})));case 4:throw new Error("file ".concat(n," noy found!"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),ee={ID:function(e,t,n){var r=parseInt(e.snp.id.substr(2)),a=parseInt(t.snp.id.substr(2));return"asc"===n?r-a:a-r},Chromosome:function(e,t,n){return ne(e,t,n,"chr")},Base:function(e,t,n){return ne(e,t,n,"bases")},Frequency:function(e,t,n){return re(e,t,n,"perc")},Publications:function(e,t,n){return re(e,t,n,"pub")}},te=function(){function e(t){Object(S.a)(this,e),this.worker=null,this.update=void 0,this.list=[],this.sortId=$,this.sortDir="asc",this.update=t}return Object(I.a)(e,[{key:"start",value:function(e,t){var n=this;this.worker&&this.worker.stop();var r=new Z(e,["Y","MT"]);this.list=r.snpList.map((function(e){return n.toSnpEl(e)})),this.doSort(),this.worker=new P((function(e){n.merge(e),"Frequency"!==n.sortId&&"Publications"!==n.sortId||n.doSort(),n.sendUpdate()})),this.worker.start(r.snpList,t)}},{key:"sort",value:function(e,t){this.sortId=e,this.sortDir=t,this.doSort(),this.sendUpdate()}},{key:"doSort",value:function(){var e=this;this.list=this.list.sort((function(t,n){return ee[e.sortId](t.val,n.val,e.sortDir)}))}},{key:"sendUpdate",value:function(){var e=this.list.map((function(e){return{done:e.done,val:Object(j.a)({},e.val)}}));this.update(e)}},{key:"merge",value:function(e){this.list.forEach((function(t){if(!t.done){var n=e.find((function(e){return t.val.snp.id===e.snp.id}));n&&(t.done=!0,t.val.perc=n.perc,t.val.pub=n.pub)}}))}},{key:"toSnpEl",value:function(e){return{val:{snp:e,perc:null,pub:0},done:!1}}}]),e}();function ne(e,t,n,r){return("asc"===n?1:-1)*(e.snp[r]>t.snp[r]?1:-1)}function re(e,t,n,r){var a=e[r],i=t[r];a||(a=2),i||(i=2);var c=a>i?1:-1;return a===i&&(c=e.snp.id>t.snp.id?1:-1),("asc"===n?1:-1)*c}var ae=n(13),ie=n(141),ce=n(143),oe=n(144),se=n(158),le=n(3),ue=Object(x.a)((function(e){return{table:{width:"100%"},container:{},header:{background:"#FAFAFA",fontWeight:"bold"}}})),de=[{id:"ID",align:"left",text:"SNP id"},{id:"Chromosome",align:"right",text:"Chromosome"},{id:"Base",align:"right",text:"Base"},{id:"Frequency",align:"right",text:"Frequency"},{id:"Publications",align:"right",text:"Publications"}];function pe(e){var t=e.sort,n=ue(),r=Object(c.useState)($),a=Object(m.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)("asc"),l=Object(m.a)(s,2),u=l[0],d=l[1];return Object(le.jsx)(ie.a,{children:Object(le.jsx)(ce.a,{children:de.map((function(e){return Object(le.jsx)(oe.a,{align:e.align,className:n.header,children:Object(le.jsx)(se.a,{active:i===e.id,direction:u,onClick:function(){return function(e){var n="asc";i===e&&(n="asc"===u?"desc":"asc"),o(e),d(n),t(e,n)}(e.id)},children:e.text})},e.id)}))})})}var he=n(145),be=Object(x.a)((function(e){return{undefined:{background:Q},novalue:{background:K},high:{background:Y},mid:{background:J},low:{background:V}}}));function fe(e){var t=e.list,n=be(),r=function(e){var t=n.undefined;return e.done&&(e.val.perc?(t=n.high,e.val.perc<.5&&(t=n.mid),e.val.perc<.25&&(t=n.low)):t=n.novalue),t};return Object(le.jsx)(he.a,{children:t.map((function(e){return Object(le.jsxs)(ce.a,{className:r(e),children:[Object(le.jsx)(oe.a,{component:"th",scope:"row",children:Object(le.jsx)("a",{target:"_blank",href:"https://www.ncbi.nlm.nih.gov/snp/".concat(e.val.snp.id),rel:"noreferrer",children:e.val.snp.id})}),Object(le.jsx)(oe.a,{align:"right",children:e.val.snp.chr}),Object(le.jsx)(oe.a,{align:"right",children:e.val.snp.bases}),Object(le.jsx)(oe.a,{align:"right",children:e.val.perc?e.val.perc.toFixed(2):"-"}),Object(le.jsxs)(oe.a,{align:"right",children:[e.val.pub>0?e.val.pub:e.val.perc?"0":"-"," "]})]},e.val.snp.id)}))})}var je=n(41),me=Object(x.a)((function(e){return{table:{width:"100%"},container:{}}})),ve={maxHeight:"calc(100% - 2em)"};function xe(e){var t=e.data,n=me(),r=Object(c.useRef)(null),a=Object(ae.b)(),i=Object(ae.c)(G),o=Object(ae.c)(z),s=Object(je.b)();Object(c.useEffect)((function(){r.current||(r.current=new te((function(e){a(B(e))}))),r.current.start(t,o)}),[t,a,o]);return Object(le.jsx)(F.a,{component:N.a,className:n.container,style:ve,children:Object(le.jsxs)(A.a,{className:n.table,size:"small",stickyHeader:!0,"aria-label":"simple table",children:[Object(le.jsx)(pe,{sort:function(e,t){r.current&&r.current.sort(e,t),s&&s.event("Data Sort",e,"")}}),Object(le.jsx)(fe,{list:i.list})]})})}var Oe=Object(x.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}}));function ge(){var e=Oe(),t=Object(c.useState)(null),n=Object(m.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)(null),l=Object(m.a)(s,2),u=l[0],d=l[1],p=Object(ae.b)(),h=Object(je.b)();Object(c.useEffect)((function(){h&&h.pageview("main")}),[]);var b=Object(c.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.filter((function(e){return e.path&&(e.path.toLowerCase().endsWith(".txt")||e.path.toLowerCase().indexOf(".23andme.")>0)}))).length>0)){e.next=9;break}return r=n[0],e.next=5,we(r);case 5:ke(i=e.sent)?(o(i),p(T(r.name)),h&&h.event("Valid File Load","valid file","")):(o(null),d("".concat(r.name," is not valid")),h&&h.event("Invalid File Content","invalid file content","")),e.next=12;break;case 9:o(null),d("unable to load ".concat(t[0].name)),h&&h.event("Invalid File Type","invalid file type","");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,p]),f=Object(v.a)({onDrop:b}),x=f.getRootProps,O=f.getInputProps,w=f.isDragActive;return Object(le.jsx)("div",{className:e.root,children:Object(le.jsxs)("div",Object(j.a)(Object(j.a)({},x()),{},{className:e.root,children:[Object(le.jsxs)("div",{className:w?e.drop:e.noDisplay,children:[Object(le.jsx)(y.a,{className:"AddIcn"}),Object(le.jsx)(k.a,{className:"text",children:"Drop the file here."})]}),null!==r?Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(xe,{data:r})}):Object(le.jsxs)("div",{className:w?e.noDisplay:e.drop,children:[Object(le.jsx)("input",Object(j.a)({},O())),Object(le.jsx)(g.a,{className:"AddIcn"}),null!==u?Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(k.a,{className:"text",children:["\ud83d\udd90 ",u]})}):Object(le.jsx)(le.Fragment,{}),Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(k.a,{className:"text",children:"Drag and Drop here your 23andme txt file."}),Object(le.jsx)(k.a,{className:"text",children:"or click here to select the file."})]})]})]}))})}function we(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return e.indexOf("This data file generated by 23andMe")>0&&e.indexOf("# rsid\tchromosome\tposition\tgenotype")>0}var Fe=n(150),Ne=n(151),Ae=n(155),Se=n(149),Ie=n(81),Ce=n.n(Ie),De=Object(x.a)((function(e){return Object(u.a)({cirProgress:{marginRight:e.spacing(2),color:"#0000FF"},txtProgress:{marginRight:e.spacing(2),color:"#0000FF"},cirHidden:{marginRight:e.spacing(2),color:"transparent"},textHidden:{display:"none"},iconDisplay:{color:"white"},iconHidden:{display:"none"}})}));function Pe(){var e=De(),t=Object(ae.c)(G),n=0,r=0;t.list.forEach((function(e){return e.done?r++:n++}));var a=r+n,i=a>0&&n>0,c=i?r/a*100:0,o=c>0?"determinate":"indeterminate",s=c>0?"".concat(Math.round(c),"%"):"";return Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(Ae.a,{position:"relative",display:"inline-flex",children:[Object(le.jsx)(Se.a,{className:i?e.cirProgress:e.cirHidden,variant:o,value:c}),Object(le.jsxs)(Ae.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:[Object(le.jsx)(Ce.a,{className:i?e.iconHidden:a>0?e.iconDisplay:e.iconHidden,fontSize:"large"}),Object(le.jsx)(k.a,{variant:"caption",component:"div",className:i?e.txtProgress:e.textHidden,children:s})]})]})})}var Ee=Object(x.a)((function(e){return Object(u.a)({margin:{marginRight:e.spacing(2)},boxHidden:{display:"none"},boxDisplay:{display:"inline-flex"}})}));function He(){var e=Ee(),t=Object(ae.c)(G),n=0,r=0,a=0,i=0,c=0;t.list.forEach((function(e){return e.done?e.val.perc?e.val.perc<.25?a++:e.val.perc<.5?r++:n++:i++:c++}));var o=[a,r,n,i,c],s=o.reduce((function(e,t){return e+t}),0),l=function(e){var t=[],n=e.reduce((function(e,t){return e+t}),0);if(n>0){var r=e.map((function(e){return Math.floor(100*e/n)})),a=100-r.reduce((function(e,t){return e+t}),0);r[r.length-1]+=a,t=r.map((function(e){return"".concat(e,"%")}))}return t}(o),u=[V,J,Y,K,Q];return Object(le.jsxs)(Ae.a,{position:"relative",className:s>0?e.boxDisplay:e.boxHidden,children:[Object(le.jsxs)(k.a,{align:"center",variant:"caption",color:"secondary",className:e.margin,children:[" ","".concat(s," Snps, ").concat(a," low frequency")]}),Object(le.jsx)(Ae.a,{top:20,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",className:e.margin,children:l.map((function(e,t){return Object(le.jsx)("div",{style:{background:u[t],position:"relative",width:e,height:"5px"}},t)}))})]})}var We=n(154),ze=n(159),Le=Object(x.a)((function(e){return Object(u.a)({combobox:{marginRight:e.spacing(2),background:"transparent"},textColor:{color:"white",borderWidth:"1px",borderColor:"white !important"},icon:{fill:"white"}})}));function Re(){var e=Le(),t=Object(ae.c)(z),n=Object(ae.b)(),r=["European","African","East Asian","South Asian"],a=["European","African","SAsian","EAsian"],i=r[a.indexOf(t)];return Object(le.jsx)(We.a,{className:e.combobox,variant:"outlined",size:"small",select:!0,value:i,onChange:function(e){var t,i=a[r.indexOf(null!==(t=e.target.value)&&void 0!==t?t:"European")];n(W(i))},InputProps:{classes:{root:e.textColor,notchedOutline:e.textColor}},SelectProps:{classes:{icon:e.icon}},children:r.map((function(e){return Object(le.jsx)(ze.a,{value:e,children:e},e)}))})}var Te=Object(x.a)((function(e){return Object(u.a)({root:{flexGrow:1},toolbar:{display:"flex",justifyContent:"space-between"},toolList:{display:"flex",alignItems:"center"}})}));function Ue(){var e=Te(),t=Object(ae.c)(U);return Object(le.jsx)("div",{className:e.root,children:Object(le.jsx)(Fe.a,{position:"static",children:Object(le.jsxs)(Ne.a,{variant:"dense",className:e.toolbar,children:[Object(le.jsxs)(k.a,{variant:"h6",color:"inherit",noWrap:!0,children:["SNPs and Me ",t.length>0?"[".concat(t,"]"):""]}),Object(le.jsxs)("div",{className:e.toolList,children:[Object(le.jsx)(Re,{}),Object(le.jsx)(He,{}),Object(le.jsx)(Pe,{})]})]})})})}var qe=n(59),Me=Object(x.a)((function(e){return{version:{position:"absolute",left:"14px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main},ribbon:{position:"absolute",right:"0px",top:"0px"}}})),Be=function(e){var t=e.label,n=e.baseURL,r=e.forkme,a=Me();return Object(le.jsxs)(le.Fragment,{children:[r&&n&&Object(le.jsx)("div",{className:a.ribbon,children:Object(le.jsx)("a",{href:n,children:Object(le.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(le.jsx)("div",{className:a.version,onClick:function(){n&&""!==qe.long&&(window.location.href=n+"/tree/"+qe.long)},children:Object(le.jsx)("p",{children:t+qe.version})})]})},Ge=Object(l.a)({palette:{primary:f.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),_e=Object(d.a)((function(e){return Object(u.a)({app:{textAlign:"center"},main:{position:"absolute",top:"55px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(le.jsxs)(p.a,{theme:Ge,children:[Object(le.jsx)(h.a,{}),Object(le.jsxs)("div",{className:t.app,children:[Object(le.jsx)(Ue,{}),Object(le.jsx)("div",{className:t.main,children:Object(le.jsx)(ge,{})}),Object(le.jsx)(Be,{label:"version : ",forkme:!1,baseURL:"https://github.com/VittorioAccomazzi/snpsandme"})]})]})})),Je=Object(E.a)({reducer:{population:L,snps:_,filename:q}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ve=new je.a("G-QK0MGYD60T");(function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.initialize();case 2:s.a.render(Object(le.jsx)(ae.a,{store:Je,children:Object(le.jsx)(_e,{})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e){e.exports=JSON.parse('{"version":"d989510\\n","long":"d9895101987d2fa3b778bbd04aa430c2ce02afd9\\n"}')},73:function(e,t,n){var r,a=n(109).wrap,i=n(101);e.exports=function e(){return this instanceof e?a(i()):r||(r=a(i()))}}},[[108,1,2]]]);
//# sourceMappingURL=main.a8c38972.chunk.js.map