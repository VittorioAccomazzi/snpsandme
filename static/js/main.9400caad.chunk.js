(this.webpackJsonpsnpandme=this.webpackJsonpsnpandme||[]).push([[0],{101:function(e,t,n){e.exports=function(){return new Worker(n.p+"05a5069ab37953881250.worker.js")}},108:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),i=n.n(a),o=n(83),c=n(157),s=n(6),l=n(152),u=n(153),d=n(82),p=n.n(d),h=n(41),b=n(14),f=n.n(b),j=n(22),m=n(16),x=n(84),v=n(139),O=n(80),g=n.n(O),y=n(79),w=n.n(y),k=n(148),F=n(146),N=n(113),A=n(147),S=n(38),I=n(39),C=n(73),D=new(n.n(C).a),P=function(){function e(t){Object(S.a)(this,e),this.worker=null,this.data=null,this.timerID=null,this.progress=void 0,this.progress=t}return Object(I.a)(e,[{key:"start",value:function(){var e=Object(j.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.worker){e.next=2;break}throw Error("foreground worked invoked while processing.");case 2:return this.data={snps:t,type:n},e.next=5,new D.default(this.data.type);case 5:this.worker=e.sent,this.worker.start(this.data.snps),this.startWorker();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.timerID&&window.clearTimeout(this.timerID),this.timerID=null,this.data=null}},{key:"startWorker",value:function(){var e=Object(j.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.worker.start(this.data.snps),(t=function(){var e=Object(j.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data||!n.worker){e.next=6;break}return n.timerID=null,e.next=4,n.worker.Next();case 4:r=e.sent,n.data&&n.worker&&(r.length>0?(n.progress(r),n.timerID=window.setTimeout(t,200)):(n.worker=null,console.log("Completly Done...")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=n(46),H=n(50);H.a.initialize("269677918");var U=Object(E.b)({name:"PopulationType",initialState:{population:"European"},reducers:{setPopulation:function(e,t){e.population=t.payload,H.a.event({category:"User",action:"Population Type set"})}}}),W=U.actions.setPopulation,z=function(e){return e.population.population},L=U.reducer,R=Object(E.b)({name:"Filename",initialState:{filename:""},reducers:{setFilename:function(e,t){e.filename=t.payload,H.a.event({category:"User",action:"Filename loaded"})}}}),T=R.actions.setFilename,q=function(e){return e.filename.filename},B=R.reducer,M=Object(E.b)({name:"Snps",initialState:{list:[]},reducers:{setSnps:function(e,t){e.list=t.payload,H.a.event({category:"User",action:"Data Loaded"})}}}),_=M.actions.setSnps,G=function(e){return e.snps},J=M.reducer,V="#FFFAAA",Y="#FFAAAA",$="#A0A0FF",K="#FFFFFF",Q="#AAAAAA",X="Frequency",Z=n(67),ee=function(){function e(t,n){var r=this;Object(S.a)(this,e),this.list=void 0,this.list=[],t.split("\n").forEach((function(e){if(e.startsWith("rs")){var t=e.split("\t").map((function(e){return e.trim()}));if(4===t.length){var a=t[1].toUpperCase();(void 0===n||n.findIndex((function(e){return e===a}))>=0)&&t[3].match(/[AGCT]/)&&!Number.isNaN(Number(t[2]))&&r.list.push({id:t[0],chr:a,bases:t[3].toUpperCase()})}}}))}return Object(I.a)(e,[{key:"snpList",get:function(){return this.list}},{key:"snpChromosome",value:function(e){return e=e.trim().toUpperCase(),this.list.filter((function(t){return t.chr===e}))}}],[{key:"fromFile",value:function(){var t=Object(j.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Z.existsSync(n)){t.next=4;break}return t.abrupt("return",new Promise((function(t,r){Z.readFile(n,{},(function(n,a){n&&r(n);var i=new e(a.toString());t(i)}))})));case 4:throw new Error("file ".concat(n," noy found!"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),te={ID:function(e,t,n){var r=parseInt(e.snp.id.substr(2)),a=parseInt(t.snp.id.substr(2));return"asc"===n?r-a:a-r},Chromosome:function(e,t,n){return re(e,t,n,"chr")},Base:function(e,t,n){return re(e,t,n,"bases")},Frequency:function(e,t,n){return ae(e,t,n,"perc")},Publications:function(e,t,n){return ae(e,t,n,"pub")}},ne=function(){function e(t){Object(S.a)(this,e),this.worker=null,this.update=void 0,this.list=[],this.sortId=X,this.sortDir="asc",this.update=t}return Object(I.a)(e,[{key:"start",value:function(e,t){var n=this;this.worker&&this.worker.stop();var r=new ee(e,["Y","MT"]);this.list=r.snpList.map((function(e){return n.toSnpEl(e)})),this.doSort(),this.worker=new P((function(e){n.merge(e),"Frequency"!==n.sortId&&"Publications"!==n.sortId||n.doSort(),n.sendUpdate()})),this.worker.start(r.snpList,t)}},{key:"sort",value:function(e,t){this.sortId=e,this.sortDir=t,this.doSort(),this.sendUpdate()}},{key:"doSort",value:function(){var e=this;this.list=this.list.sort((function(t,n){return te[e.sortId](t.val,n.val,e.sortDir)}))}},{key:"sendUpdate",value:function(){var e=this.list.map((function(e){return{done:e.done,val:Object(h.a)({},e.val)}}));this.update(e)}},{key:"merge",value:function(e){this.list.forEach((function(t){if(!t.done){var n=e.find((function(e){return t.val.snp.id===e.snp.id}));n&&(t.done=!0,t.val.perc=n.perc,t.val.pub=n.pub)}}))}},{key:"toSnpEl",value:function(e){return{val:{snp:e,perc:null,pub:0},done:!1}}}]),e}();function re(e,t,n,r){return("asc"===n?1:-1)*(e.snp[r]>t.snp[r]?1:-1)}function ae(e,t,n,r){var a=e[r],i=t[r];a||(a=2),i||(i=2);var o=a>i?1:-1;return a===i&&(o=e.snp.id>t.snp.id?1:-1),("asc"===n?1:-1)*o}var ie=n(12),oe=n(141),ce=n(143),se=n(144),le=n(158),ue=n(3),de=Object(v.a)((function(e){return{table:{width:"100%"},container:{},header:{background:"#FAFAFA",fontWeight:"bold"}}})),pe=[{id:"ID",align:"left",text:"SNP id"},{id:"Chromosome",align:"right",text:"Chromosome"},{id:"Base",align:"right",text:"Base"},{id:"Frequency",align:"right",text:"Frequency"},{id:"Publications",align:"right",text:"Publications"}];function he(e){var t=e.sort,n=de(),a=Object(r.useState)(X),i=Object(m.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)("asc"),l=Object(m.a)(s,2),u=l[0],d=l[1];return Object(ue.jsx)(oe.a,{children:Object(ue.jsx)(ce.a,{children:pe.map((function(e){return Object(ue.jsx)(se.a,{align:e.align,className:n.header,children:Object(ue.jsx)(le.a,{active:o===e.id,direction:u,onClick:function(){return function(e){var n="asc";o===e&&(n="asc"===u?"desc":"asc"),c(e),d(n),t(e,n)}(e.id)},children:e.text})},e.id)}))})})}var be=n(145),fe=Object(v.a)((function(e){return{undefined:{background:Q},novalue:{background:K},high:{background:$},mid:{background:V},low:{background:Y}}}));function je(e){var t=e.list,n=fe(),r=function(e){var t=n.undefined;return e.done&&(e.val.perc?(t=n.high,e.val.perc<.5&&(t=n.mid),e.val.perc<.25&&(t=n.low)):t=n.novalue),t};return Object(ue.jsx)(be.a,{children:t.map((function(e){return Object(ue.jsxs)(ce.a,{className:r(e),children:[Object(ue.jsx)(se.a,{component:"th",scope:"row",children:Object(ue.jsx)("a",{target:"_blank",href:"https://www.ncbi.nlm.nih.gov/snp/".concat(e.val.snp.id),rel:"noreferrer",children:e.val.snp.id})}),Object(ue.jsx)(se.a,{align:"right",children:e.val.snp.chr}),Object(ue.jsx)(se.a,{align:"right",children:e.val.snp.bases}),Object(ue.jsx)(se.a,{align:"right",children:e.val.perc?e.val.perc.toFixed(2):"-"}),Object(ue.jsxs)(se.a,{align:"right",children:[e.val.pub>0?e.val.pub:e.val.perc?"0":"-"," "]})]},e.val.snp.id)}))})}var me=Object(v.a)((function(e){return{table:{width:"100%"},container:{}}})),xe={maxHeight:"calc(100% - 2em)"};function ve(e){var t=e.data,n=me(),a=Object(r.useRef)(null),i=Object(ie.b)(),o=Object(ie.c)(G),c=Object(ie.c)(z);Object(r.useEffect)((function(){a.current||(a.current=new ne((function(e){i(_(e))}))),a.current.start(t,c)}),[t,i,c]);return Object(ue.jsx)(F.a,{component:N.a,className:n.container,style:xe,children:Object(ue.jsxs)(A.a,{className:n.table,size:"small",stickyHeader:!0,"aria-label":"simple table",children:[Object(ue.jsx)(he,{sort:function(e,t){a.current&&a.current.sort(e,t)}}),Object(ue.jsx)(je,{list:o.list})]})})}var Oe=Object(v.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}}));function ge(){var e=Oe(),t=Object(r.useState)(null),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(null),c=Object(m.a)(o,2),s=c[0],l=c[1],u=Object(ie.b)(),d=Object(r.useCallback)(function(){var e=Object(j.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.filter((function(e){return e.path&&(e.path.toLowerCase().endsWith(".txt")||e.path.toLowerCase().indexOf(".23andme.")>0)}))).length>0)){e.next=9;break}return r=n[0],e.next=5,ye(r);case 5:ke(a=e.sent)?(i(a),u(T(r.name))):(i(null),l("".concat(r.name," is not valid"))),e.next=11;break;case 9:i(null),l("unable to load ".concat(t[0].name));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,u]),p=Object(x.a)({onDrop:d}),b=p.getRootProps,v=p.getInputProps,O=p.isDragActive;return Object(ue.jsx)("div",{className:e.root,children:Object(ue.jsxs)("div",Object(h.a)(Object(h.a)({},b()),{},{className:e.root,children:[Object(ue.jsxs)("div",{className:O?e.drop:e.noDisplay,children:[Object(ue.jsx)(w.a,{className:"AddIcn"}),Object(ue.jsx)(k.a,{className:"text",children:"Drop the file here."})]}),null!==a?Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsx)(ve,{data:a})}):Object(ue.jsxs)("div",{className:O?e.noDisplay:e.drop,children:[Object(ue.jsx)("input",Object(h.a)({},v())),Object(ue.jsx)(g.a,{className:"AddIcn"}),null!==s?Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsxs)(k.a,{className:"text",children:["\ud83d\udd90 ",s]})}):Object(ue.jsx)(ue.Fragment,{}),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(k.a,{className:"text",children:"Drag and Drop here your 23andme txt file."}),Object(ue.jsx)(k.a,{className:"text",children:"or click here to select the file."})]})]})]}))})}function ye(e){return we.apply(this,arguments)}function we(){return(we=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return e.indexOf("This data file generated by 23andMe")>0&&e.indexOf("# rsid\tchromosome\tposition\tgenotype")>0}var Fe=n(150),Ne=n(151),Ae=n(155),Se=n(149),Ie=n(81),Ce=n.n(Ie),De=Object(v.a)((function(e){return Object(c.a)({cirProgress:{marginRight:e.spacing(2),color:"#0000FF"},txtProgress:{marginRight:e.spacing(2),color:"#0000FF"},cirHidden:{marginRight:e.spacing(2),color:"transparent"},textHidden:{display:"none"},iconDisplay:{color:"white"},iconHidden:{display:"none"}})}));function Pe(){var e=De(),t=Object(ie.c)(G),n=0,r=0;t.list.forEach((function(e){return e.done?r++:n++}));var a=r+n,i=a>0&&n>0,o=i?r/a*100:0,c=o>0?"determinate":"indeterminate",s=o>0?"".concat(Math.round(o),"%"):"";return Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsxs)(Ae.a,{position:"relative",display:"inline-flex",children:[Object(ue.jsx)(Se.a,{className:i?e.cirProgress:e.cirHidden,variant:c,value:o}),Object(ue.jsxs)(Ae.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:[Object(ue.jsx)(Ce.a,{className:i?e.iconHidden:a>0?e.iconDisplay:e.iconHidden,fontSize:"large"}),Object(ue.jsx)(k.a,{variant:"caption",component:"div",className:i?e.txtProgress:e.textHidden,children:s})]})]})})}var Ee=Object(v.a)((function(e){return Object(c.a)({margin:{marginRight:e.spacing(2)},boxHidden:{display:"none"},boxDisplay:{display:"inline-flex"}})}));function He(){var e=Ee(),t=Object(ie.c)(G),n=0,r=0,a=0,i=0,o=0;t.list.forEach((function(e){return e.done?e.val.perc?e.val.perc<.25?a++:e.val.perc<.5?r++:n++:i++:o++}));var c=[a,r,n,i,o],s=c.reduce((function(e,t){return e+t}),0),l=function(e){var t=[],n=e.reduce((function(e,t){return e+t}),0);if(n>0){var r=e.map((function(e){return Math.floor(100*e/n)})),a=100-r.reduce((function(e,t){return e+t}),0);r[r.length-1]+=a,t=r.map((function(e){return"".concat(e,"%")}))}return t}(c),u=[Y,V,$,K,Q];return Object(ue.jsxs)(Ae.a,{position:"relative",className:s>0?e.boxDisplay:e.boxHidden,children:[Object(ue.jsxs)(k.a,{align:"center",variant:"caption",color:"secondary",className:e.margin,children:[" ","".concat(s," Snps, ").concat(a," low frequency")]}),Object(ue.jsx)(Ae.a,{top:20,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",className:e.margin,children:l.map((function(e,t){return Object(ue.jsx)("div",{style:{background:u[t],position:"relative",width:e,height:"5px"}},t)}))})]})}var Ue=n(154),We=n(159),ze=Object(v.a)((function(e){return Object(c.a)({combobox:{marginRight:e.spacing(2),background:"transparent"},textColor:{color:"white",borderWidth:"1px",borderColor:"white !important"},icon:{fill:"white"}})}));function Le(){var e=ze(),t=Object(ie.c)(z),n=Object(ie.b)(),r=["European","African","East Asian","South Asian"],a=["European","African","SAsian","EAsian"],i=r[a.indexOf(t)];return Object(ue.jsx)(Ue.a,{className:e.combobox,variant:"outlined",size:"small",select:!0,value:i,onChange:function(e){var t,i=a[r.indexOf(null!==(t=e.target.value)&&void 0!==t?t:"European")];n(W(i))},InputProps:{classes:{root:e.textColor,notchedOutline:e.textColor}},SelectProps:{classes:{icon:e.icon}},children:r.map((function(e){return Object(ue.jsx)(We.a,{value:e,children:e},e)}))})}var Re=Object(v.a)((function(e){return Object(c.a)({root:{flexGrow:1},toolbar:{display:"flex",justifyContent:"space-between"},toolList:{display:"flex",alignItems:"center"}})}));function Te(){var e=Re(),t=Object(ie.c)(q);return Object(ue.jsx)("div",{className:e.root,children:Object(ue.jsx)(Fe.a,{position:"static",children:Object(ue.jsxs)(Ne.a,{variant:"dense",className:e.toolbar,children:[Object(ue.jsxs)(k.a,{variant:"h6",color:"inherit",noWrap:!0,children:["SNPs and Me ",t.length>0?"[".concat(t,"]"):""]}),Object(ue.jsxs)("div",{className:e.toolList,children:[Object(ue.jsx)(Le,{}),Object(ue.jsx)(He,{}),Object(ue.jsx)(Pe,{})]})]})})})}var qe=n(59),Be=Object(v.a)((function(e){return{version:{position:"absolute",left:"14px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main},ribbon:{position:"absolute",right:"0px",top:"0px"}}})),Me=function(e){var t=e.label,n=e.baseURL,r=e.forkme,a=Be();return Object(ue.jsxs)(ue.Fragment,{children:[r&&n&&Object(ue.jsx)("div",{className:a.ribbon,children:Object(ue.jsx)("a",{href:n,children:Object(ue.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(ue.jsx)("div",{className:a.version,onClick:function(){n&&""!==qe.long&&(window.location.href=n+"/tree/"+qe.long)},children:Object(ue.jsx)("p",{children:t+qe.version})})]})},_e=Object(o.a)({palette:{primary:p.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),Ge=Object(s.a)((function(e){return Object(c.a)({app:{textAlign:"center"},main:{position:"absolute",top:"55px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(ue.jsxs)(l.a,{theme:_e,children:[Object(ue.jsx)(u.a,{}),Object(ue.jsxs)("div",{className:t.app,children:[Object(ue.jsx)(Te,{}),Object(ue.jsx)("div",{className:t.main,children:Object(ue.jsx)(ge,{})}),Object(ue.jsx)(Me,{label:"version : ",forkme:!1,baseURL:"https://github.com/VittorioAccomazzi/snpsandme"})]})]})})),Je=Object(E.a)({reducer:{population:L,snps:J,filename:B}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(ue.jsx)(ie.a,{store:Je,children:Object(ue.jsx)(Ge,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e){e.exports=JSON.parse('{"version":"developer","long":""}')},73:function(e,t,n){var r,a=n(109).wrap,i=n(101);e.exports=function e(){return this instanceof e?a(i()):r||(r=a(i()))}}},[[108,1,2]]]);
//# sourceMappingURL=main.9400caad.chunk.js.map